# PRODUCT FINDER


## Context
When receiving a new batch of products, we may have trouble storing them properly, since these articles often come mislabeled. Especially important for this task is the article's EAN. However, provided an article from a new batch, it's not rare to find there was already another one with the same EAN but being different. And even more problematic is the case of already having such article but not being able to identify it because the EAN, and even the name, price, cost, etc., are slightly modified.

## Goal
To solve this problem, allowing a clean and efficient classification of every new article. This will provide a clear understanding about both what the company has and what the company needs.

## The algorithm
It measures the "distance" between two articles to determine if they are close enough to be the same. This algorithm compares every new article with all the stored ones and, in case there are possible matches, it will show a short list of them to the user, giving different options on how to add it to the database.
The way 'distances' between articles have been measured is of course key, so let's give an overview about the file 'distances.py':

- The 'name_dist' function combines the two previously mentioned distances, giving more weight to Levenshtein (which worked better) and returning a unique distance value between names. It's important to note that although Levenshtein worked well in general, its proximity criterion didn't always align with that of our client, as it is obvious. However, in many of those cases, the Cosine Distance complemented it quite well, returning articles that were actually similar. This is why I decided to combine the two and not rely solely on Levenshtein.

- cost_prize_dist is as simple as adding "Coste" and "Precio" to have another measure of the distance between articles.

- Unlike most of the article features, which were prone to errors, "Proveedor" feature was quite reliable. This made belonging to the same supplier a kind of necessary condition (or almost) for two articles to be considered "the same". So, it played an important role in obtaining the final distance: if an existing article in the system matched the new one in terms of supplier, the distance between them would be shortened by a percentage given by supplier_coef, which is the probability of belonging to the specific supplier multiplied by 10.

For instance, if the new article belonged to a small supplier (or one not highly demanded by our client) that provides only 0.007% of the total articles, its 'supplier_coef' would be 0.07. Now, let's assume a distance generated by considering "Name" and "Cost+Price" is 30 units. The final distance value to our article would be 30 * 0.07 = 2.1 units (very close). The intention is to make it difficult for an article that doesn't belong to the same supplier to appear among the closest ones.

## How to use it
You can go through the code to understand how it works, if that's what you want, and of course any suggestions for improvement are welcome. However, if you just want to play around with it and see what the final tool does, here's what you need to do:

- Open the interface with this link: https://appuctfinder-eltjgkgmquexwphsuofzvf.streamlit.app/

- Fill the gaps with the data of a new article. You can get inspiration from the real articles you'll find in the dataset 'df_art'; you only need to modify some of the important characteristics (fields marked with * in the interface) but making sure the supplier ("Proveedor") is the same.

- If there is no article "close enough" to this new one, that means it is new and thus it will be added to the dataset. Otherwise you'll be asked whether the new article matches any of the provided ones: 
If you decide it doesn't, it will be added as new. 
If you find one of them is "essentially the same", click the button next to it. The algorithm will decide which one remains in the dataset by comparing values of the characteristic "Días desde la ultima venta" and taking the one with a lower value.

- To verify that it worked properly, you can repete the search and you'll see the new article is now in the system (remember in case you matched it with any other, it will only replace the other article if you specified a lower number of "Días desde la ultima venta" than what the older one had).